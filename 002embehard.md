## 02. 임베디드 하드웨어

#### 2.1 임베디드 하드웨어?

갑자기 소프트웨어공학생한테 하드웨어를 공부하라고 하니 어이가 없을 수도 있다. ~~이거 왜 하죠 전자공이 할텐데~~

하지만 잘 생각해보자. 소프트웨어가 돌아가는 플랫폼은 결국 **특정 하드웨어** 에서 돌아간다. 하드웨어에 대한 이해가 없으면 디버깅 시에 이 오류가 어디서 나온건지는 아무도(?) 모른다.

그래서 이번 장에서는 기초적인(?) 임베디드 하드웨어를 알아 보자.

##### 2.1.1 임베디드 vs PC

    아니, PC가 있는데 왜 굳이 만들어요 귀찮게시리.

그래서 준비했다. 어떤 점이 달라서 저렇게 굳이 **배워야 하는가 말이다**

1. PC 특징
- 프로세서가 **고성능**이다. (현재 평범한 cpu의 성능은 90년도의 슈퍼컴퓨터와 성능이 비슷하다)
- 메모리가 비교적 **대용량**이다. (지금 노트북이나 컴퓨터의 메모리 용량을 보자.)
- 보조 기억장치가 다양하다 (예. SSD, HDD)
- 주변 장치가 다양하다 (예. 키보드, 마우스, 스피커, 마이크)

2. 임베디드 시스템 특징
- 프로세서가 **사용할 만큼**만 탑제된다. (아두이노를 보자. 정말 눈꼽만한 성능이다. ~~포문 질못돌리면 멈춘다~~)
- 메모리가 **사용할 만큼**만 탑제된다. (아두이노 메모리는 2kb이다.)
- 보조 기억장치는 **거의 없거나 사용 안한다.** (아두이노 저장공간은 32kb이다.)
- 주변 장치는 **사용할 장치만** 사용한다. (아두이노에 필요한 센서만 사용하는것을 생각하면 된다.)

... 뭔가 많이 다른만큼 구조를 더욱 알아야 사용 가능할 것이라고 생각한다.

#### 2.2 임베디드 하드웨어 구성요소 특징

##### 2.2.1 임베디드 프로세서

프로세서가 프로세서지 무슨 종류가 있다고 생각할 수 도 있다. 하지만 엄연한 목적화 된 프로세서인만큼 구조가 다르다.

- RISC ~~리스크가 크다~~

CPU의 명령어 개수를 줄이고 **(특정 명령어 집합만 대응하고)**, 하드웨어 구조를 좀 더 간단하게 만드는 아키텍쳐이다.

자세히 설명하면, 뒤에서 설명할 CISC CPU같은 경우에는 복합 명령어 집합등이 존재한다. 하지만 실제 사용되지 않는 명령어(특정 상황이 아니면 사용되지 않는 명령어들) 을 삭제하고 **필요한 대응 명령어들만 넣는다.**

예로, SUN SPARC 나 MIPS등이 해당된다.

- CISC ~~네트워크 회사 아닙니다~~

**스텍 제어 처리가 가능**하며 범용 명령어 집합이 들어가는 아키텍쳐이다. 상대적으로 RISC에 비해서 매우 **복잡한 설계구조**를 가진다.

자세히 설명하면, **특정 연산만 수행 가능**한 RISC에 비해서 (물론 RISC도 범용 연산이 가능한 아키텍쳐가 존재하기는 한다.) **범용 연산이 수행 가능**한 점이 매우 다르며, 레지스터, 메모리연산을 포함하고 있다.

예로, X86, AMD64, IBM PowerPC, ARM 등이 있다.

##### 2.2.2 임베디드 메모리

임베디드 환경은 제한 된 만큼 필요한 크기를 고려해서 선택해야 한다. 메모리는 크게 **RAM과 ROM이** 있다.

- ROM (Read-Only-Memory)

**비휘발성 메모리**로 전원이 인입되지 않아도 데이터를 유지하며, 읽기만 가능한 메모리를 말한다.

크게 아래 2가지로 나눌 수 있다.
- Mask ROM
    - 제작 될 때부터 **마스크**라 하는 툴에 내용을 저장한 후에 마치 **굽듯이** 내용을 기록한다. 처음 기록하면 그 내용은 **다시 수정할 수 없다.**
- EPROM (Erasable Programmable ROM)
    - 말 그대로 **지우고 재기록 가능한 롬**으로 특정 신호를 통해 읽기/쓰기 작업을 수행하거나 빛을 통해서 재기록을 할 수도 있다.

- Flash Memory

이전에는 데이터를 저장하기 위해서 아주 많은 롬을 썼다. (초 구형 기기를 보면 빼곡히 쌓인 롬들의 향연을 볼 수 있다.)

하지만 **반도체의 집적화와 공정기술의 발달로 ROM의 발전 형태**인 Flash 메모리가 등장하였다.

이러한 칩들을 보조기억장치인 USB에서 시작해서 SSD까지 발전하여, HDD를 대체할 새로운 보조기억장치로 떠오르고 있다.

- RAM (Random Access Memory)

**휘발성 메모리**로 전원이 인가될 때만 데이터가 존재하는 메모리 이다. RAM은 Random Access 라는 특징이 존재하는데, 이 특징은 **어느 데이터에 접근할 때 위치에 따라 시간이 다르지 않은걸 의미한다.** (측정이 무의미 하다. 반면 HDD는 멀어진 위치에 있을수록 느린게 보인다.) 이 특징을 이용해 필수적인 메모리로 사용된다. 

보조기억 장치는 말 그대로 **보조**의 역활이기 때문에 CPU가 처리한 내용을 빠르게 받아 들일수가 없다. (HDD의 읽는 속도가 ms 라면, CPU의 처리속도는 ps이다. **약 10^4배 정도 더 빠르게 입출력이 일어난다.**)

이때 RAM이 보조하여 그나마 빠른 속도로 데이터를 저장하며, **보조기억장치에 저장할 시간을 벌어 주는 역활**을 한다.

RAM은 **DRAM과 SRAM**으로 나누어지는데, 둘의 성격이 다르기 때문에 탑제되는 위치도 다르다.

- DRAM
    - Dynamic-Random-Access-Memory로, 동적메모리이다. SRAM에 비해서는 I/O 속도가 느리지만, 대용량화가 비교적 쉽고 밀도가 높다.
- SRAM
    - Static-Random-Access-Memory로, 정적메모리이다. DRAM에 비해서 I/O속도가 빠르지만, 대용량화가 비교적 어렵고 밀도를 높이기가 어렵다. 또한 제작 단가가 높아서 **CPU의 캐시메모리로만 사용된다**

##### 2.2.3 임베디드 주변장치

임베디드의 주변장치는 PC와 별반 다를게 없는데, 크게 **입력장치**와 **출력장치**로 나뉘게 된다. 이 단원에서 가장 중요한건 입력을 처리하는 방법이다. 아래의 용어를 꼭 숙지하자.

##### 입력

입력을 처리하는 방법에는 **폴링**방법과 **인터럽트** 방법이 있다.

- 폴링 (Polling)
    -  폴링은 **하나의 장치나 프로그램이 동기화&충돌회피를 목적으로 다른 장치&프로그램을 검사하여 특정 동작이 수행되면 송수신을 하는 방법**을 말한다. 예를 들면, 클라우드 저장소가 있으면 사용자가 파일을 올리는 행동을 하기 전 까지는 대기하고 있다가, 사용자에게 파일을 올리는 Request가 오면 그때 송수신을 진행하는것이 폴링 방법이다.

- 인터럽트 (Interrupt)
    - 인터럽트는 **자신의 상태가 변하면 능동적으로 프로세서나 시스템에게 알리고 프로세서나 시스템은 그 정보를 먼저 처리한 후 이전에 처리하던 작업을 다시 제개하는 방법**이다. 예를 들면, 복합기가 다른 사용자가 스켄을 하던 도중에 복사를 시작하면, 스켄하던 데이터를 잠시 저장해두고 복사 할 데이터를 처리 한 후에 스켄을 다시 제개하는것이 인터럽트 방법이다.

##### 2.2.4 임베디드 하드웨어 용어

임베디드를 공부하면서 많이 쓰이게 될 용어들을 정리해둔 것이다.

- 반도체 칩
    - 아두이노가 옆에 있으면 한번 보자. 무언가 네모난 칩들이 있는데 그것이 바로 반도체 칩이다. 보통 석영이나 겉은 플라스틱, 내부는 실리콘으로 구성되어있다.
- PCB (Printed-Circuit-Board)
    - 칩을 전선만으로 연결하기에는 매우 난잡하고 잘 빠지기 때문에, 판에 부품을 고정하여 내부에 실장된 구리선으로 연결하는 판을 PCB라고 한다. **절대 빵판이라고 부르면 안된다.**
- 만능기판
    - 보통 **빵판**이라고 부르며, 수많은 구멍을 통해 연결할 수 있다. +-가 있는 부분은 **세로**로, 접접이 있는 부분은 **가로**로 연결되어있다. 잊지 말자.
- Low, High
    - 그냥 신호의 Pulse 가 가장 Peak 일때 High, 가장 Under일때 Low 이다.
- Low enable, Low active
    - 보통 High신호가 들어오면 송수신을 하지만, 가끔 특별하게 Low신호에 반응하는 회로들이 있다. 그때 사용하는 단어가 저 단어이다. __보통 회로에서는 *나 /로 표시한다.__ (예. TX 가 Low Enable일경우 *TX나 /TX로 표기)
- 버스 쟁탈
    - ~~버스를 쟁탈하는거다 암암..~~ 가 아니라... 간단하게 말하자면 입/출력단자가 겹친 경우를 의미한다. 예를 들자면, 차는 2대인데 1차로에서 먼저 들어가겠다고 안비끼고 가는 상황의 의미한다. 이렇게 되면 사고가 나는 것 처럼, 컴퓨터 내부에서도 주소가 충돌하여 데미지를 입는 상황이 생긴다.
- 트라이 스테이트 출력
    - 3상 상황 출력으로, 3가지 상황을 입/출력하는 회로이다. 보통 **input, select가 들어오면 그에 따라 output이 나오는 회로**이다.