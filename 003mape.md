## 03. 마이크로프로세서

#### 3.1 마이크로프로세서란?

마이크로프로세서란 **기계어 코드를 실행하기 위해 실행과정을 단계별로 나누어 처리를 위한 마이크로 코드를 작성하고, 이 마이크로 코드에 의해 단계적으로 처리하는 논리회로**를 말한다. 초기의 마이크로프로세서는 하나의 칩으로 만들어졌으나, 점점 **다른 하드웨어 요소들을 집적시키는 경향**이 있다(원칩화) 따라서 CPU-코어라는 말로 다른 요소들과 구별한다

##### 3.1.1 마이크로프로세서 회로도

간단하게 마이크로프로세서 시스템을 구축하면, RAM, ROM, 프로세서가 필요하다.

##### 3.1.2 마이크로프로세서 특이점

마이크로프로세서에서의 특이점은 3가지가 존재한다.

- 타이밍 문제
    - 주소와 데이터 버스를 사용하기 위해서는 접근 방법 뿐만이 아닌, **접근 시간인 타이밍** 에 대한 관점도 생각해야한다.
    - 예를 들어, 주소 신호 선은 특정시간동안은 enable 선이 활성화 되어 있어야 한다.
- 버스 사이클
    - 프로세서 내부에서 데이터를 가져오기 위해서는 **버스**라고 하는 곳에서 데이터 결정을 하게 된다. 이러한 전체 과정을 말한다.
- 버스 핸드쉐이킹
    - 버스에서 데이터를 가져오기 위해서는 다른 장치하고의 **동기화**가 필요하다. 이때 일치시키기 위한 작업이다.

#### 3.2 DMA

DMA란 Direct-Memory-Access로써, 다른 SW적 도움을 받지 않고 **장치가 직접 I/O를 하는 것이다.**

일어나는 과정은 아래와 같다.

1. I/O장치가 **DMA request 신호를 DMA장치에게** 보낸다.

2. DMA장치는 응답을 보내면서 **Bus Request신호**를 같이 보내게 된다.

3. **프로세서에서는 DMA에게 사용 권한을 모두 위임**하는 **Bus Acknoledge 신호**를 DMA에게 보내게 된다.

4. DMA장치는 **DMA Acknoledge 신호를 I/O장치에 보내면서 R/W작업**을 수행한다.

DMA를 사용하면서 직접 접근의 장점을 모두 가지게 된다. 예를 들어, **많은 데이터 I/O가 일어나는 상황**에서 모두 프로세서를 거치게 된다면 **오버헤드**가 일어나게 될 것이다(모두 interrupting해야하니까.) 하지만 DMA 를 사용하면 단 한번의 인터럽팅만 발생한다.

하지만 장점만 있는것은 아니다. **회로가 복잡해 지고, 전체적으로 DMA 전용 체널이 필요해서 과부하가 일어날 수 있다.**

#### 3.3 마이크로프로세서 내장장치

- I/O핀
- 어드레스 디코딩
    - 어드레스 디코더
- UART
    - 범용 비동기화 송수신기로, 병렬 방식 데이터를 직렬 방식으로 서로 상호변환 하는것이다 (병렬 <--> 직렬)
- PLD (Programmable Logic Device)
    - 제조 후 사용자가 내부 구조를 변경 가능한 회로